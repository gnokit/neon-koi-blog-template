---
import type { CollectionEntry } from 'astro:content';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const { title, pubDate, heroImage } = post.data;

// Handle base URL for GitHub Pages
const baseUrl = import.meta.env.BASE_URL.endsWith('/') ? import.meta.env.BASE_URL : `${import.meta.env.BASE_URL}/`;
const heroImageUrl = heroImage?.startsWith('http') ? heroImage : heroImage ? `${baseUrl}${heroImage.startsWith('/') ? heroImage.slice(1) : heroImage}` : undefined;

const formattedDate = new Date(pubDate).toLocaleDateString('en-US', {
  weekday: 'long',
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<div class="rounded-2xl overflow-hidden">
  <!-- Hero Image -->
  <div class="rounded-lg overflow-hidden mb-6">
    <img
      src={heroImageUrl}
      alt={title}
      class="w-full h-auto object-cover"
    />
  </div>

  <!-- Title -->
  <div class="px-2">
    <a
      href={`/blog/${post.slug}/`}
      class="group block"
    >
      <time class="text-sm text-neutral-500 dark:text-neutral-400 block mb-2">
        {formattedDate}
      </time>
      <h2 class="text-2xl md:text-3xl font-bold text-neutral-900 dark:text-white group-hover:text-[var(--color-glitch-purple)] transition-colors">
        {title}
      </h2>
    </a>
  </div>
</div>
